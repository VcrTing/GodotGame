[gd_scene load_steps=51 format=3 uid="uid://n2tf7bjt1fe0"]

[ext_resource type="Script" uid="uid://bemgn7umj6lpa" path="res://scripts/system/SystemConfig.cs" id="1_iyx0m"]
[ext_resource type="Script" uid="uid://bdtd1kvhadi8c" path="res://scripts/system/Envs.cs" id="1_j5jx5"]
[ext_resource type="Texture2D" uid="uid://bqcf2l7q7h4g" path="res://pngs/ux/grass1.png" id="2_iyx0m"]
[ext_resource type="Texture2D" uid="uid://b45fb5malrj1v" path="res://pngs/ui/GameBg.png" id="3_gsk6d"]
[ext_resource type="Texture2D" uid="uid://dygepy5utjac6" path="res://pngs/ux/grass2.png" id="3_iyx0m"]
[ext_resource type="Texture2D" uid="uid://biblfyasxj5e1" path="res://pngs/ux/floor3.png" id="4_jcd4p"]
[ext_resource type="Texture2D" uid="uid://re5vllxlca6j" path="res://pngs/ux/floor4.png" id="5_uacia"]
[ext_resource type="Texture2D" uid="uid://cog06pruwsl2m" path="res://pngs/ux/maps.png" id="7_5f8cm"]
[ext_resource type="Script" uid="uid://gmsjbkn1xbya" path="res://scripts/player/PlayerController.cs" id="7_ff6ho"]
[ext_resource type="PackedScene" uid="uid://cpscsfwwyuyqs" path="res://wavehouse/sounds/sound_player_controller.tscn" id="11_1dqgb"]
[ext_resource type="Script" uid="uid://bu22knj6i5gk8" path="res://scripts/ux/DieLineZero.cs" id="11_44saj"]
[ext_resource type="Texture2D" uid="uid://e7bx6uj52710" path="res://pngs/ux/dieline.png" id="13_44saj"]
[ext_resource type="Script" uid="uid://dbjditv1jl2b8" path="res://scripts/player/PlayerBuffController.cs" id="13_pn65j"]
[ext_resource type="Script" uid="uid://bikplbsxucboc" path="res://scripts/player/PlayerAttackArea.cs" id="15_1dqgb"]
[ext_resource type="PackedScene" uid="uid://br3fnkwdn12o7" path="res://wavehouse/player/shooter_work_table.tscn" id="15_gv2t6"]
[ext_resource type="Script" uid="uid://d38vgruxqe4rl" path="res://scripts/caps/CapsCenter.cs" id="16_5jxlq"]
[ext_resource type="PackedScene" uid="uid://c6ds1gjwrriuf" path="res://wavehouse/ui/sound_ui_controller.tscn" id="16_j7bvy"]
[ext_resource type="Script" uid="uid://bngscwsc4eikr" path="res://scripts/system/SaveDataManager.cs" id="16_kay4s"]
[ext_resource type="Script" uid="uid://csciyfvn7fqbk" path="res://scripts/player/PlayerUxTileMap.cs" id="16_y81of"]
[ext_resource type="PackedScene" uid="uid://bfthejwtbkxar" path="res://wavehouse/obj/bullet_wall.tscn" id="18_4k8fq"]
[ext_resource type="Script" uid="uid://bctsx0boajko" path="res://scripts/ux/BulletLowDown.cs" id="18_75pfo"]
[ext_resource type="Texture2D" uid="uid://ceae1jqigxfo5" path="res://pngs/ux/sun.png" id="20_1dqgb"]
[ext_resource type="Script" uid="uid://ca4iwnly6d3i1" path="res://scripts/system/MyGameCamera.cs" id="20_2cnsr"]
[ext_resource type="Script" uid="uid://dx07d6odlbs4e" path="res://scripts/ux/SunCenterSystem.cs" id="21_j7bvy"]
[ext_resource type="Script" uid="uid://ckcymbhwfhj3" path="res://scripts/jingdian/EnmyGenerator.cs" id="21_n74k2"]
[ext_resource type="Script" uid="uid://dvqi22qwhhnnd" path="res://scripts/caps/EnmyCenter.cs" id="21_si7kk"]
[ext_resource type="PackedScene" uid="uid://crbw8wgirbf30" path="res://wavehouse/sounds/sound_game_obj_controller.tscn" id="22_1dqgb"]
[ext_resource type="Script" uid="uid://cxcgsqncwoqqb" path="res://scripts/ux/FlowerPengSystem.cs" id="24_gsk6d"]
[ext_resource type="Texture2D" uid="uid://80g2un26x6vh" path="res://pngs/ui/Stop.png" id="24_mi64w"]
[ext_resource type="Texture2D" uid="uid://b1syu5inaurkx" path="res://pngs/ui/Stop_fcs.png" id="25_ds53i"]
[ext_resource type="Texture2D" uid="uid://dkp32atjlrfko" path="res://pngs/ui/btn_things_bg.png" id="25_gv2t6"]
[ext_resource type="Texture2D" uid="uid://guv06p3w7fot" path="res://pngs/ui/Stop_hv.png" id="26_p8c7m"]
[ext_resource type="PackedScene" uid="uid://boifn2cuwmjny" path="res://wavehouse/ui/control_back_button.tscn" id="27_1xwo4"]
[ext_resource type="Script" uid="uid://du1rc4h5c8gt7" path="res://scripts/ui/ingame/InGameBackButton.cs" id="27_ds53i"]
[ext_resource type="PackedScene" uid="uid://cnwb7247j6ht" path="res://wavehouse/sounds/sound_fx_controller.tscn" id="29_gsk6d"]
[ext_resource type="PackedScene" uid="uid://bqwpvqnfkp735" path="res://wavehouse/ui/capter_die_popup.tscn" id="30_kh47s"]
[ext_resource type="PackedScene" uid="uid://dnrecc1uscn34" path="res://wavehouse/sounds/bgm_controller.tscn" id="31_1xwo4"]
[ext_resource type="PackedScene" uid="uid://j1afhac3mr6i" path="res://wavehouse/ui/capter_win_popup.tscn" id="31_bnwl7"]
[ext_resource type="PackedScene" uid="uid://c20gy31whur46" path="res://wavehouse/system/data_mangers.tscn" id="36_emonu"]
[ext_resource type="Script" uid="uid://cxkn12vympk8" path="res://scripts/jingdian/GameWinnerChecker.cs" id="36_p8c7m"]
[ext_resource type="Script" uid="uid://bxgen0vqmpkb2" path="res://scripts/caps/GameStatistic.cs" id="37_3ss0b"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_j7bvy"]
size = Vector2(1080, 960)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_bl13t"]
texture = ExtResource("2_iyx0m")
texture_region_size = Vector2i(60, 60)
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_74lek"]
texture = ExtResource("3_iyx0m")
texture_region_size = Vector2i(60, 60)
0:0/0 = 0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_yk7ts"]
texture = ExtResource("4_jcd4p")
texture_region_size = Vector2i(60, 60)
0:0/0 = 0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_ajshl"]
texture = ExtResource("5_uacia")
texture_region_size = Vector2i(60, 60)
0:0/0 = 0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_gm488"]
texture = ExtResource("7_5f8cm")
texture_region_size = Vector2i(60, 60)
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
4:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
4:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
3:2/0 = 0
4:2/0 = 0
0:3/0 = 0
1:3/0 = 0
2:3/0 = 0
3:3/0 = 0
4:3/0 = 0
0:4/0 = 0
1:4/0 = 0
2:4/0 = 0
3:4/0 = 0
4:4/0 = 0

[sub_resource type="TileSet" id="TileSet_iyx0m"]
tile_size = Vector2i(110, 110)
sources/0 = SubResource("TileSetAtlasSource_bl13t")
sources/1 = SubResource("TileSetAtlasSource_74lek")
sources/2 = SubResource("TileSetAtlasSource_yk7ts")
sources/3 = SubResource("TileSetAtlasSource_ajshl")
sources/4 = SubResource("TileSetAtlasSource_gm488")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_44saj"]
size = Vector2(1200, 20)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2cnsr"]
size = Vector2(1160, 90)

[node name="System" type="Node2D"]
script = ExtResource("16_kay4s")

[node name="Envs" type="Node2D" parent="."]
script = ExtResource("1_j5jx5")

[node name="Background" type="Node2D" parent="Envs"]

[node name="GameBg" type="Sprite2D" parent="Envs/Background"]
scale = Vector2(0.7, 0.7)
texture = ExtResource("3_gsk6d")

[node name="Player" type="Node2D" parent="."]

[node name="SoundPlayerController" parent="Player" instance=ExtResource("11_1dqgb")]
position = Vector2(0, -600)

[node name="PlayerAttackArea" type="Area2D" parent="Player"]
position = Vector2(0, -210)
collision_layer = 16
collision_mask = 16
script = ExtResource("15_1dqgb")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player/PlayerAttackArea"]
position = Vector2(0, 210)
shape = SubResource("RectangleShape2D_j7bvy")

[node name="PlansWorkingTileMap" type="TileMapLayer" parent="Player/PlayerAttackArea"]
position = Vector2(0, -90)
tile_set = SubResource("TileSet_iyx0m")
script = ExtResource("16_y81of")

[node name="PlayerController" type="Node2D" parent="Player"]
z_index = 100
position = Vector2(0, 560)
script = ExtResource("7_ff6ho")

[node name="ShooterWorkTable" parent="Player/PlayerController" instance=ExtResource("15_gv2t6")]

[node name="PlayerBuffController" type="Node2D" parent="Player/PlayerController"]
script = ExtResource("13_pn65j")

[node name="Ux" type="Node2D" parent="Player"]

[node name="DieLineZero" type="Area2D" parent="Player/Ux"]
z_index = 40
position = Vector2(0, 450)
collision_layer = 8
collision_mask = 2048
script = ExtResource("11_44saj")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player/Ux/DieLineZero"]
position = Vector2(0, -30)
shape = SubResource("RectangleShape2D_44saj")

[node name="View" type="Sprite2D" parent="Player/Ux/DieLineZero"]
texture = ExtResource("13_44saj")

[node name="BulletFixer" type="Node2D" parent="Player/Ux"]

[node name="BulletLowDown" type="Area2D" parent="Player/Ux/BulletFixer"]
visible = false
position = Vector2(0, -550)
collision_layer = 524288
collision_mask = 524288
script = ExtResource("18_75pfo")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player/Ux/BulletFixer/BulletLowDown"]
shape = SubResource("RectangleShape2D_2cnsr")

[node name="BulletWall" parent="Player/Ux/BulletFixer" instance=ExtResource("18_4k8fq")]
position = Vector2(-600, 0)
rotation = 0.05235988

[node name="BulletWall2" parent="Player/Ux/BulletFixer" instance=ExtResource("18_4k8fq")]
position = Vector2(600, 0)
rotation = -0.05235988

[node name="GameSystems" type="Node2D" parent="."]
script = ExtResource("1_iyx0m")

[node name="SoundUiController" parent="GameSystems" instance=ExtResource("16_j7bvy")]

[node name="Sky" type="Node2D" parent="GameSystems"]

[node name="Camera2D" type="Camera2D" parent="GameSystems/Sky"]
script = ExtResource("20_2cnsr")

[node name="CanvasLayer" type="CanvasLayer" parent="GameSystems"]

[node name="ControlStop" type="Control" parent="GameSystems/CanvasLayer"]
custom_minimum_size = Vector2(90, 90)
layout_mode = 3
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -60.0
offset_bottom = 60.0
grow_horizontal = 0

[node name="HBoxContainer" type="HBoxContainer" parent="GameSystems/CanvasLayer/ControlStop"]
custom_minimum_size = Vector2(90, 0)
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="TextureButton" type="TextureButton" parent="GameSystems/CanvasLayer/ControlStop/HBoxContainer"]
custom_minimum_size = Vector2(60, 60)
layout_mode = 2
texture_normal = ExtResource("24_mi64w")
texture_pressed = ExtResource("25_ds53i")
texture_hover = ExtResource("26_p8c7m")
texture_focused = ExtResource("26_p8c7m")
stretch_mode = 0
script = ExtResource("27_ds53i")

[node name="ControlSun" type="Control" parent="GameSystems/CanvasLayer"]
custom_minimum_size = Vector2(0, 70)
layout_mode = 3
anchors_preset = 10
anchor_right = 1.0
offset_top = 90.0
offset_bottom = 160.0
grow_horizontal = 2
script = ExtResource("21_j7bvy")

[node name="TextureRect" type="TextureRect" parent="GameSystems/CanvasLayer/ControlSun"]
z_index = -1
layout_mode = 1
anchors_preset = 9
anchor_bottom = 1.0
offset_right = 200.0
grow_vertical = 2
texture = ExtResource("25_gv2t6")
expand_mode = 2

[node name="HBoxContainer" type="HBoxContainer" parent="GameSystems/CanvasLayer/ControlSun"]
custom_minimum_size = Vector2(70, 70)
layout_mode = 1
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_top = -35.0
offset_right = 260.0
offset_bottom = 35.0
grow_vertical = 2

[node name="TextureRect" type="TextureRect" parent="GameSystems/CanvasLayer/ControlSun/HBoxContainer"]
layout_mode = 2
texture = ExtResource("20_1dqgb")
expand_mode = 2

[node name="SunShowLabel" type="Label" parent="GameSystems/CanvasLayer/ControlSun/HBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 36
text = "0"

[node name="ControlBack" parent="GameSystems/CanvasLayer" instance=ExtResource("27_1xwo4")]
visible = false

[node name="CapterDiePopup" parent="GameSystems/CanvasLayer" instance=ExtResource("30_kh47s")]
visible = false

[node name="CapterWinPopup" parent="GameSystems/CanvasLayer" instance=ExtResource("31_bnwl7")]
visible = false

[node name="Ear" type="Node2D" parent="GameSystems"]

[node name="AudioListener2D" type="AudioListener2D" parent="GameSystems/Ear"]

[node name="DataMangers" parent="GameSystems" instance=ExtResource("36_emonu")]

[node name="CapsCenter" type="Node2D" parent="."]
script = ExtResource("16_5jxlq")
enumChapter = 102

[node name="EnmyGenerator" type="Node2D" parent="CapsCenter"]
position = Vector2(0, -380)
script = ExtResource("21_n74k2")

[node name="FlowerPengSystem" type="Node2D" parent="CapsCenter"]
position = Vector2(0, 850)
script = ExtResource("24_gsk6d")

[node name="EnmyEnvBuilder" type="Node2D" parent="CapsCenter"]
script = ExtResource("21_si7kk")

[node name="GameWinnerChecker" type="Node2D" parent="CapsCenter"]
script = ExtResource("36_p8c7m")

[node name="GameStatistic" type="Node2D" parent="CapsCenter"]
script = ExtResource("37_3ss0b")

[node name="CapJingDian" type="Node2D" parent="."]

[node name="SoundFxController" parent="CapJingDian" instance=ExtResource("29_gsk6d")]

[node name="SoundGameObjController" parent="CapJingDian" instance=ExtResource("22_1dqgb")]

[node name="BgmController" parent="CapJingDian" instance=ExtResource("31_1xwo4")]
